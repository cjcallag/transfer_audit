---
title: "FORA Property Audit"
output: html_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo    = FALSE,
                      message = FALSE,
                      warning = FALSE, error = FALSE)
```

```{css}
html *
  {
    color: #808080
    font-family: Arial !important;
  }
```

```{r data, echo = FALSE, message = FALSE, warning=FALSE, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(dplyr)
library(DT)
library(sf)
wants <- read.csv("data.csv")
api_url <- "https://maps.fodis.net/server/rest/services/OpenData/AdministrativeBoundaries/FeatureServer/1/query?where=1%3D1&outFields=*&outSR=4326&f=json"
fora <- sf::st_read(api_url) 
fora <- merge(fora[fora$parcel_id %in% wants$COE, ], wants, by.x = "parcel_id", by.y = "COE") %>%
  distinct(parcel_id, .keep_all = TRUE)
```

```{r}
fora %>% 
  select(COE = parcel_id, APN = Match.APN, Owner = Match.Owner, Deed = Match.Deed, `Army Transfer Doc` = Transfer.Doc.Name, Jurisdiction) %>%
  `st_geometry<-`(NULL) %>%
  DT::datatable(escape = FALSE, rownames = FALSE,
                # caption = htmltools::tags$caption(style = "text-align: center; color: #808080",
                #                                   htmltools::tags$h3("Draft Signs and Locations")),
                options = list(dom = "ftip",
                               search = list(regex           = TRUE, 
                                             caseInsensitive = TRUE)))
```

